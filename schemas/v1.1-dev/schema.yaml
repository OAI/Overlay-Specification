$id: https://spec.openapis.org/overlay/1.1/schema/WORK-IN-PROGRESS
$schema: https://json-schema.org/draft/2020-12/schema
description: The description of Overlay v1.1.x documents
type: object
properties:
  overlay:
    type: string
    pattern: ^1\.1\.\d+$
  info:
    $ref: "#/$defs/info-object"
  extends:
    type: string
    format: uri-reference
  actions:
    type: array
    minItems: 1
    uniqueItems: true
    items:
      $ref: "#/$defs/action-object"
required:
  - overlay
  - info
  - actions
$ref: "#/$defs/specification-extensions"
unevaluatedProperties: false
$defs:
  info-object:
    type: object
    properties:
      title:
        type: string
      version:
        type: string
    required:
      - title
      - version
    $ref: "#/$defs/specification-extensions"
    unevaluatedProperties: false
  action-object:
    properties:
      target:
        type: string
        pattern: ^\$
      description:
        type: string
      update:
        type:
          - string
          - boolean
          - object
          - array
          - number
          - "null"
      copy:
        type: string
      remove:
        type: boolean
        default: false
      parameters:
        type: array
        items:
          $ref: "#/$defs/parameter-object"
        uniqueItems: true
    required:
      - target
    $ref: "#/$defs/specification-extensions"
    unevaluatedProperties: false
  parameter-object:
    type: object
    properties:
      name:
        type: string
        matches: '^[a-zA-Z0-9]+$'
      defaultValues:
        type: array
        items:
          type: string
      separator:
        type: string
    required:
      - name
    $ref: "#/$defs/specification-extensions"
    unevaluatedProperties: false
  specification-extensions:
    patternProperties:
      ^x-: true
